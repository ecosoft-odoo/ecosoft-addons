<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <!-- hr_expense_sheet -->
    <record id="view_hr_expense_sheet_form" model="ir.ui.view">
        <field name="name">hr.expense.sheet.form</field>
        <field name="model">hr.expense.sheet</field>
        <field
            name="inherit_id"
            ref="hr_expense_operating_unit.view_hr_expense_sheet_form"
        />
        <field name="arch" type="xml">
            <xpath expr="//group[@name='employee_details']" position="inside">
                <field name="salary_welfare" readonly="1" />
            </xpath>
        </field>
    </record>

    <!-- hr_expense -->
    <record id="view_expenses_form" model="ir.ui.view">
        <field name="name">hr.expense.view.form.ou</field>
        <field name="model">hr.expense</field>
        <field name="inherit_id" ref="hr_expense_operating_unit.view_expenses_form" />
        <field name="arch" type="xml">
            <xpath expr="//field[@name='amount_residual']" position="after">
                <field name="salary_welfare" invisible="1" />
            </xpath>
        </field>
    </record>

    <record id="action_sheet_all_salary" model="ir.actions.act_window">
        <field name="name">Salary &amp; Welfare</field>
        <field name="res_model">hr.expense.sheet</field>
        <field name="view_mode">tree,kanban,form,pivot,graph,activity</field>
        <field name="search_view_id" ref="hr_expense.hr_expense_sheet_view_search" />
        <field name="domain">[('salary_welfare', '=', True)]</field>
        <field name="context">{'default_salary_welfare': True}</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
            No salary &amp; welfare report found. Let's create one!
            </p><p>
            Once you have created salary &amp; welfare, submit it to your manager who will validate it.
            </p>
        </field>
    </record>

    <menuitem
        id="menu_hr_expense_salary"
        name="Salary &amp; Welfare"
        sequence="2"
        parent="hr_expense.menu_hr_expense_root"
        action="action_sheet_all_salary"
        groups="usability_hr_expense_salary_welfare.group_salary_welfare"
    />

    <record
        id="hr_expense_advance_clearing.action_my_hr_expense_sheet"
        model="ir.actions.act_window"
    >
        <field
            name="domain"
        >[('advance', '=', False), ('salary_welfare', '=', False)]</field>
    </record>

</odoo>
